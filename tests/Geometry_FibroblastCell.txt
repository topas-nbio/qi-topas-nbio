# TOPAS-nBio example - Fibroblast Cell
# A fibroblast cell geometry
# Specifying parameters for a nucleus and/or mitochondria, include the organelles.
#
# Since mitochondria are arranged randomly, this check should be switched off, overlap checking is still done 
# and when an overlap is detected the overlapping components are rearranged. 
b:Ge/QuitIfOverlapDetected="false"

d:Ge/World/HLX=50. um
d:Ge/World/HLY=50. um
d:Ge/World/HLZ=50. um

s:Ge/MyCell/Type="TsFibroblastCell1"
s:Ge/MyCell/Color="white"
s:Ge/MyCell/Parent="World"
s:Ge/MyCell/Material="G4_WATER"

#Nucleus
d:Ge/MyCell/Nucleus/NucleusRadius=6. um
s:Ge/MyCell/Nucleus/Material="G4_WATER"
s:Ge/MyCell/Nucleus/Color="red"
s:Ge/MyCell/Nucleus/DrawingStyle="solid"

#Mitochondria
i:Ge/MyCell/Mitochondria/NumberOfMitochondria=50
d:Ge/MyCell/Mitochondria/a=0.5 um
d:Ge/MyCell/Mitochondria/b=0.3 um
d:Ge/MyCell/Mitochondria/c=0.9 um
s:Ge/MyCell/Mitochondria/Material="G4_WATER"
s:Ge/MyCell/Mitochondria/Color="green"
s:Ge/MyCell/Mitochondria/DrawingStyle="solid"

Ph/Default/Modules = 1 "g4em-dna"

# Set a source
s:So/Example/Type                     = "Beam"
s:So/Example/Component                = "BeamPosition"
s:So/Example/BeamParticle             = "proton"
d:So/Example/BeamEnergy               = 5 MeV
u:So/Example/BeamEnergySpread         = 0.757504
s:So/Example/BeamPositionDistribution = "None"
s:So/Example/BeamAngularDistribution  = "Gaussian"
d:So/Example/BeamAngularCutoffX       = 90. deg
d:So/Example/BeamAngularCutoffY       = 90. deg
d:So/Example/BeamAngularSpreadX       = 0.0032 rad
d:So/Example/BeamAngularSpreadY       = 0.0032 rad
i:So/Example/NumberOfHistoriesInRun   = 2

#Score energy deposited in Cell components
s:Sc/Geometry_FibroblastCell/Quantity = "TsNtupleForCell"
s:Sc/Geometry_FibroblastCell/Component = "MyCell"
s:Sc/Geometry_FibroblastCell/IfOutputFileAlreadyExists = "Overwrite"  
s:Sc/Geometry_FibroblastCell/OutputType = "ASCII" 
s:Sc/Geometry_FibroblastCell/OutputFile = "Geometry_FibroblastCell"
b:Sc/Geometry_FibroblastCell/PropagateToChildren = "True"

b:Ts/ShowCPUTime = "True"

